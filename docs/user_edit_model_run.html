<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Edit model run screen</title>

<script src="site_libs/header-attrs-2.10/header-attrs.js"></script>
<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/yeti.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/textmate.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet" />
<script src="site_libs/pagedtable-1.1/js/pagedtable.js"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
      .display.math{display: block; text-align: center; margin: 0.5rem auto;}
  </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>





<link rel="stylesheet" href="rmarkdown.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.tab('show');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-inverse  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">FRAM Documentation</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Overview</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Model Detail
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="calcs_data_chin.html">Chinook</a>
    </li>
    <li>
      <a href="calcs_data_coho.html">Coho</a>
    </li>
    <li>
      <a href="calcs_glossary.html">Glossary</a>
    </li>
    <li>
      <a href="calcs_appendices.html">Appendices</a>
    </li>
    <li>
      <a href="calcs_citations.html">Supporting Documents</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Pre and Post Season FRAM
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="apps_chin.html">Chinook</a>
    </li>
    <li>
      <a href="apps_coho.html">Coho</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Base Period
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="base_chin_bpupdate.html">Chinook update</a>
    </li>
    <li>
      <a href="base_chin_frambuilder.html">Chinook FRAM Builder</a>
    </li>
    <li>
      <a href="base_coho.html">Coho</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    User Manual
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="user_prereq.html">Prerequisites</a>
    </li>
    <li>
      <a href="user_basic_forward_run.html">A basic run</a>
    </li>
    <li>
      <a href="user_main_menu_full.html">Main menu options</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->
<footer style="color: #ff4000; font-weight: bold; text-align:center">
    <p> !! THIS SITE UNDER DEVELOPMENT !! </p>
</footer>

<div id="header">



<h1 class="title toc-ignore">Edit model run screen</h1>

</div>


<p>FRAM allows users to explore different management scenarios by adjusting “inputs” ([Per-run parameters]) that control fishery and stock properties.</p>
<p>For some analyses, it may make sense to adjust model parameters outside of the FRAM application. For example, a uniform increase or decrease in a group of fisheries over multiple time steps may be accomplished more easily by manipulating the project database directly.</p>
<p>However, the main menu “Edit model run” button accesses a convenient interface for changing individual values within the application. Clicking this produces a submenu divided into further “Stock” and “Fishery” buttons.</p>
<p><img src="images/fvs_edit.png" width="100%" /></p>
<div id="stock-recruits" class="section level1">
<h1>Stock recruits</h1>
<p>Stock recruit scalers (<code>StockRecruit</code> in [Per-run parameters]) are multiplied against a base period abundance (<code>BaseCohort</code> in [Base period parameters]) to generate a starting, pre-fishing cohort by stock (and age for Chinook).<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a></p>
<p>These parameters represent the magnitude of the current stock abundance relative to that during the base period years. Thus, a stock recruit scaler of 1 indicates an annual abundance for that stock equal to the base period, a value &gt;1 is an abundance larger than the base period, and &lt;1 is an abundance smaller than the base period.</p>
<p>Coho ‘Recruit Cohort’ values are in January age-3 units, whereas Chinook ‘Recruit Cohort’ contains four age-class specific initial ocean abundance values.</p>
<p>For preseason forward runs, stock recruit scaler values are a function of stock-specific forecasts provided by technical staff at the beginning of the planning cycle. They are generally established at the outset of preseason planning and then updated if necessary as additional data are available for the year (i.e. Canadian Chinook forecasts are not usually available until the end of March). For Chinook, stock recruit scalers are typically produced from terminal run size forecasts by running [Backwards FRAM].</p>
<p>Accordingly, recruit scalers would not usually be manually adjusted during a typical forward model run, but the interface enables this possibility if, for example, one wanted to explore the implications of a much larger or smaller salmon return than was predicted or with a different age distribution (e.g., “what happens if stock X returns at half of what was forecast and/or with far more younger fish?”).</p>
<p>Note that updating the stock recruit scaler will automatically update the associated recruit cohort and vice versa.</p>
<p>The “Read Recruits” button can be used to load forecast values compiled in the external FRAMVSTemplate file from sheet FRAM_Recruits. Conversely, the “Fill Spreadsheet” button can be used to download values from the model run to the FRAMVSTemplate file, where additional notation or comments can be stored.</p>
<p><img src="images/fvs_edit_stock_recruit.png" width="100%" /></p>
</div>
<div id="stockfishery-scalers" class="section level1">
<h1>Stock/Fishery Scalers</h1>
<p>Stock-fishery-specific exploitation rate (ER) scalers allow adjustments to the base period directed impacts of a particular fishery on a specific stock or group of stocks within each time step. These scalers function act on the base period fishery-stock-specific ERs.</p>
<p>These parameters can provide a temporary fix to an identified issue in the FRAM base period calibration. They are also used to represent negotiated closures within a fishery (e.g. a spatial closure). Any such adjustments must be supported by an accepted external analysis of fishery-stock interactions which demonstrates how and why the fishery would be expected to have different stock-specific contribution levels than it had during the base period years (e.g. CWT recoveries or genetic stock identification).</p>
<p>Stock-fishery-specific ER scalers display 0 until a fishery is selected from the upper left drop-down menu.</p>
<p>If a fishery/time-step is not modeled, a “****” is displayed with blue highlight.</p>
<p>By default, the values are equal to 1, which means the base period exploitation rate is used. Thus, a value &gt;1 is a larger ER than the base period and &lt;1 is smaller than the base period ER.</p>
<p>After choosing the focal fishery, the desired values are directly input into each cell and the “Ok - Done” button writes those changes to the project database for the active model run. These changes then persist across subsequently copied runs.</p>
<p>Few to none of these scalers may be “actively” modifying the many possible stock-fishery combinations in a FRAM run, and the red “Show Active Scalers” button presents a secondary screen filtered to and highlighting those particular instances. Although values cannot be directly modified on this screen, it can serve as a useful check of the current model run parameterization.</p>
<div class="figure">
<img src="images/fvs_edit_stock_fish_er.png" alt="Stock-fishery scalers display 0 until a fishery is selected." width="100%" />
<p class="caption">
Stock-fishery scalers display 0 until a fishery is selected.
</p>
</div>
</div>
<div id="fishery-quotascalers" class="section level1">
<h1>Fishery Quota/Scalers</h1>
<p>These [Per-run parameters] control the representation of fishery effort and may be the most frequently adjusted FRAM element during preseason planning.</p>
<p>As noted in the [Edit input parameter values] section of [A Basic Forward Run], legal, landed catch fishery impacts are controlled by “quotas” and/or “scalers” which are in turn controlled by per-timestep <code>fishery flags</code>. Values entered or adjusted under the quota/scalers input menus are stored in the [Project database tables] <code>FisheryScalers</code>. Fisheries without an input will be modeled with a default fishery effort scaler of 0.0 (flag = 1).</p>
<p>The flag values (displayed in the interface) determine whether the fishery is treated as non-selective and/or mark selective, and whether catch is processed as a fixed expectation (quotas) or as effort relative to the base period (scalers). Both modes operate on the fishery as a whole, combining with stock and age specific exploitation rates to determine resulting impacts from the fishery.</p>
<p>Note that many fishery/time-step cells are filled with asterisks (****) designating a lack of base period information to model that stratum. If a fishery now operates in one of those time steps the input (and impacts) need to be combined with an adjacent fishery or time step.</p>
<p>A single value in the input interface (either a scaler or quota) can be entered, and once the model is run, the resulting associated value will be populated in the interface (e.g. enter a quota value here and proceed through the menus to complete a model run, which will then return the resulting scaler value for that entered quota). Several values can be entered or updated before clicking “OK – Done”.</p>
<div class="figure">
<img src="images/fvs_edit_fish_quotascaler.png" alt="Fishery flag effects are shown below the current scaler and quota values." width="100%" />
<p class="caption">
Fishery flag effects are shown below the current scaler and quota values.
</p>
</div>
<p>The values for mark-selective fisheries are displayed on a secondary input screen that is displayed after selecting “Ok - done”. Only fishery and time steps flagged in the first fishery controls screen as mark-selective or a combination with a mark-selective component will be present in the secondary MSF input screen (flags 7, 8, 17, 18, 27,28; displaying a magenta highlight in Scaler/Quota cells). <strong>Thus, if you want to enter a MSF or change a MSF input parameter, be sure it is flagged as such first.</strong></p>
<p>In addition to scaler and quota inputs, the MSF fishery controls input screen also contains four additional input parameters. Some of these parameters are derived and agreed-to each preseason planning cycle by salmon co-managers and others are set by the PFMC management process. Thus, some stay fairly static year-to-year and some change annually.</p>
<ul>
<li>Release Rate: Hooking release mortality rate (landed fish then released)</li>
<li>Marked MisID: Release rate of marked fish that could be legally retained</li>
<li>UnMark MisID: Retention rate of unmarked fish that should have been released</li>
<li>DropOff Rate: Fishery-related mortality rate (fish that escape but die due to injury)</li>
</ul>
<p>Note these four MSF input parameters cannot have a zero value and must be &gt;0.0000.</p>
<div class="figure">
<img src="images/fvs_edit_fish_quotascaler_msf.png" alt="Mark-selective values are displayed on a second interface after approving non-selective values." width="100%" />
<p class="caption">
Mark-selective values are displayed on a second interface after approving non-selective values.
</p>
</div>
<p>Altering a fishery <code>quota</code> has fairly intuitive implications (though the target value may itself result from considerable additional calculation external to FRAM). In contrast, the particular numeric effects of altering <code>fishery scalers</code> requires more prior knowledge of the base period practices (and stock composition).</p>
<p>In addition to the direct adjustment of single values in the interface (which are then written to the database), the “Import catch” and “Export to spreadsheet” buttons provide functionality to read and write values for all fisheries and time steps at once from an external [FRAMVSTemplate file], on sheets FRAMinput and FRAM_MSF. Note also the “clipboard copy” option in the upper left corner of the interface.</p>
</div>
<div id="non-retention" class="section level1">
<h1>Non-Retention</h1>
<p>Coho or Chinook non-retention (CNR) inputs represent any fishery (or portion of a fishery) that will be open for salmon fishing but requires release of Coho or Chinook. Differences in the input menu screens for Coho and Chinook reflect the different methodologies.</p>
<p>For Chinook, similar to other inputs, control flag values (flags 1 – 4) determine the mode by which non-retention impacts are calculated, with different modes requiring various additional parameter values (Field1, Field2, Field3, Field4) (definitions displayed in the lower left of the interface window). Typically, only flag 3 (Legal/Sublegal Encounters) or flag 4 (Total Encounters) are used. Encounters for Puget Sound marine sport fisheries can be automatically updated using the [Automate Pass 1 Pass 2] button on the FRAM [Utilities] menu.</p>
<p>For Coho, non-retention mortality is calculated outside of the model and entered as the total number of dead fish resulting from the non-retention portion of a fishery/time-step. Typically, the value is derived from a historic level of landed or encountered coho and then applying both a release mortality rate and a drop-off mortality rate to that historic level, and summing the two types of mortalities.</p>
<p>Similarly, the individual values can be altered (and consequently saved to the run in the database) and there is also a button to “Zero All Fields”. In addition, the interface provides options to “Import NonRetention” and “Export to Spreadsheet” all fishery/time steps from the external FRAMVSTemplate file (sheet FRAM_CNR).</p>
<p>Note many fishery/time-step cells are filled with asterisks (****) designating a lack of base period information to model that stratum. If a fishery now operates in one of those time steps the input (and impacts) need to be combined with an adjacent fishery or time step.</p>
<div class="figure">
<img src="images/fvs_edit_fish_nonret.png" alt="Chinook non-retention impacts" width="100%" />
<p class="caption">
Chinook non-retention impacts
</p>
</div>
<div class="figure">
<img src="images/fvs_edit_fish_nonret_coho.png" alt="Coho non-retention impacts" width="100%" />
<p class="caption">
Coho non-retention impacts
</p>
</div>
</div>
<div id="size-limits-chinook" class="section level1">
<h1>Size Limits (Chinook)</h1>
<p>The minimum length of legal landed catch is defined per-fishery and time-step. This is relevant for multi-aged Chinook modeling where the minimum retention size limit (unit = fork length in millimeters) may vary annually, by fishery and/or by time-step. Generally:</p>
<ul>
<li>troll fisheries often require larger fish than sport in the same location and time</li>
<li>winter limits are often smaller</li>
</ul>
<div class="figure">
<img src="images/fvs_edit_fish_sizelimit.png" alt="Size limits" width="100%" />
<p class="caption">
Size limits
</p>
</div>
</div>
<div class="footnotes">
<hr />
<ol>
<li id="fn1"><p>See <a href="https://github.com/Angelikahagen/MainFRAM_VS-Repo/blob/9985faadb23cd27b227cbe079113928e7035fddb/FramCalcs.vb#L3569">FramCalcs:ScaleCohort</a><a href="#fnref1" class="footnote-back">↩︎</a></p></li>
</ol>
</div>

<footer>
      <br>
      <p style="color: #326020; font-weight: bold; text-align:right">
        Contributing partners:
        <a href="https://www.pcouncil.org/managed_fishery/salmon/" target="_blank">PFMC</a>
        <a href="https://wdfw.wa.gov/fishing" target="_blank">WDFW</a>  
        <a href="https://nwifc.org/" target="_blank">NWIFC</a>
      </p>
</footer>


</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>


</body>
</html>
